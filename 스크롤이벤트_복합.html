<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title> new document </title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<meta name="description" content="대한민국 NO.1 T커머스 K쇼핑, TV홈쇼핑, 모바일K쇼핑 앱, 베스트100, 다양한 카테고리, 프로모션, 할인 정보 등 안내." />
	<meta name="keywords" content="K 쇼핑" />
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
	<meta name="format-detection" content="telephone=no" /> <!-- 병헌 : 사파리에서 전화번호 자동 표기 방지 -->

	<link rel="stylesheet" type="text/css" class="comcss" href="https://static.kshop.co.kr/ec/css/common.css"/>
	<script type="text/javascript" src="https://static.kshop.co.kr/ec/js/jquery-1.12.0.js"></script>
 </head>

	<style type="text/css">
	body, html {margin: 0;padding: 0; min-height: 100%;}
	.menu {
		width: 100%;
		height: 75px;
		background-color: rgba(0, 0, 0, 1);
		position: fixed;
		background-color:rgba(4, 180, 49, 0.6);
		-webkit-transition: all 0.3s ease;
		-moz-transition: all 0.3s ease;
		-o-transition: all 0.3s ease;
		transition: all 0.3s ease;
		z-index: 100;
		
	}

	#menu-center {width: 980px;height: 75px;margin: 0 auto;}
	#menu-center ul {margin: 15px 0 0 0;}
	#menu-center ul li {list-style: none;margin: 0 30px 0 0;display: inline;}
	#menu-center ul li a.active {
		font-family:'Droid Sans', serif;
		font-size: 14px;
		color: #fff;
		text-decoration: none;
		line-height: 50px;
	}
	a {
		font-family:'Droid Sans', serif;
		font-size: 14px;
		color: black;
		text-decoration: none;
		line-height: 50px;
	}
	#home {
		background-color: grey;
		padding-top:20%;
		width: 100%;
		overflow: hidden;
		background-image: url(images/home-bg2.png);
		box-sizing: border-box;
	}
	#home .img{opacity: 1;}
	#portfolio {position: relative;background-image: url(images/portfolio-bg.png);width: 100%;}
	#about {background-color: blue;width: 100%;	}
	#contact {background-color: red;width: 100%;}

	.container{
		height: 100%;
		position: relative;
	}
	.container > div{height: 100%; overflow: auto;}
	.box:last-child{margin-bottom: 50px;}
	.ilbuni{
		position: relative;
		width: 100%;
		height: 100%;
		overflow: hidden;
		display: flex;
		justify-content: center;

		}
	.ilbuni .img{ position: absolute;width:300px;;transform: translate(-300% ,-300%) scale(0);opacity: 0; transition: all 1s; overflow: hidden;}
	.ilbuni.active .img{transform: translate(0) scale(1); opacity: 1;}
	.ilbuni .img img{width: 100%;}
	/* .box.active .ilbuni .img{opacity: 1;} */
	</style>

<body> 
	<div class="m1 menu">
		<div id="menu-center">
			<ul>
				<li><a class="active" href="#home">•Home😀</a>
	
				</li>
				<li><a href="#portfolio">•Portfolio✅</a>
	
				</li>
				<li><a href="#about">•About😴</a>
	
				</li>
				<li><a href="#contact">•Contact👩‍👦</a>
	
				</li>
			</ul>
		</div>
		<!-- <ul>
			<li><a class="active" href="#home">•Home😀</a>

			</li>
			<li><a href="#portfolio">•Portfolio✅</a>

			</li>
			<li><a href="#about">•About😴</a>

			</li>
			<li><a href="#contact">•Contact👩‍👦</a>

			</li>
		</ul> -->
	</div>

	<div class="container">

		<div id="home" class="box" >
			<div class="ilbuni" >
				<div class="img">
					<img src="./images/ilbuni.gif">
				</div>
			</div>
		</div>

		<div id="portfolio" class="box">
			<div class="ilbuni" >
				<div class="img">
					<img src="./images/ilbuni.gif">
				</div>
			</div>
		</div>

		<div id="about" class="box">
			<div class="ilbuni" >
				<div class="img">
					<img src="./images/ilbuni.gif">
				</div>
			</div>
		</div>

		<div id="contact" class="box">
			<div class="ilbuni" >
				<div class="img">
					<img src="./images/ilbuni.gif">
				</div>
			</div>
		</div>
	</div>

</body>

<script>
	// -------JQUERY------
	$(document).ready(function () {
		moveHesh();
		sectionActve();

		$(document).on("scroll", function(){
			//whellMoving();
			onScroll();
			blockActive();
			
		});
	});
	function moveHesh(){
		$('a[href^="#"]').on('click', function (e) {
			e.preventDefault();
			$(document).off("scroll");
			
			$('a').each(function () {
				$('a').removeClass('active');
			})
			$(this).addClass('active');
	
			var target = this.hash,
			$target = $(target);
			$('html, body').stop().animate({
				scrollTop: $target.offset().top
			}, 500, 'swing', function () {
				window.location.hash = target;
				$(document).on("scroll", function(){
					blockActive();
					sectionActve()
				});
			});
		});
	}

	function whellMoving(){
		const elm = $('.box');
		let delta = 0;

		elm.each(function (index) {
			// 개별적으로 Wheel 이벤트 적용
			
			$(this).on("mousewheel DOMMouseScroll", function (e) {
				console.log(index)
				// console.log(e)
				e.preventDefault();
				var delta = 0;
				//if (!event) event = window.event;
				if (event.wheelDelta) {
					
					delta = event.wheelDelta / 120;
					//console.log('event.wheelDelta =' + delta)
					if (window.opera) delta = -delta;
				} 
				else if (event.detail)
					delta = -event.detail / 3;
				var moveTop = $(window).scrollTop();
				var elmSelecter = elm.eq(index);
				//console.log('elm.eq(index)===='+elm.eq(index).text())
				
				// 마우스휠을 위에서 아래로
				if (delta < 0) {
					if ($(elmSelecter).next() != undefined) {
						try{
							moveTop = $(elmSelecter).next().offset().top;
							//console.log('delta < 0 일때moveTop ='+ moveTop)
						}catch(e){}
					}
					$(this).next().addClass('active').siblings().removeClass('active')
				// 마우스휠을 아래에서 위로
				} else {
					if ($(elmSelecter).prev() != undefined) {
						try{
							moveTop = $(elmSelecter).prev().offset().top;
							//console.log('delta > 0 일때moveTop ='+ moveTop)
						}catch(e){}
					}
					$(this).prev().addClass('active').siblings().removeClass('active')
				}
					
				// 화면 이동 0.8초(800)
				$("html,body").stop().animate({
					scrollTop: moveTop + 'px'
				}, {
					duration: 800, complete: function () {
					}
				});
			});
		});
	}


	function onScroll(){
		const ilbuniElm = $('.ilbuni');

		ilbuniElm.each(function (i){
			
			let posY = parseInt($(this)[0].getBoundingClientRect().top);
			//console.log(i+'  posY======='+posY)
			//console.log('window.innerHeight*0.5======='+window.innerHeight*0.4)
			if(posY < window.innerHeight*0.4){
				$(this).addClass('active')
				// console.log('posY=='+ posY)
				// console.log(window.innerHeight*0.5)
			}else{
				// $(this).removeClass('active')
			}
		})
	}

	function blockActive(){
		let scrollPos = $(document).scrollTop();

		$('#menu-center a').each(function(){
			let currentLink = $(this);
			//console.log(currentLink)

			const selectElm = $(currentLink.attr('href'))

			
			//console.log(totalPrveHeight)
			if(selectElm.offset().top <= parseInt(scrollPos * 1.2)){
				//console.log('selectElm='+ selectElm.offset().top)
				//console.log('scrollPos * 1.2=='+ parseInt(scrollPos * 1.2))
				$('#menu-center a').removeClass("active");
				currentLink.addClass('active');
				//selectElm.addClass('active'); //블럭 엑티브
			}else{
				currentLink.removeClass('active')
				//selectElm.removeClass('active')
			}
		})
	}

//섹션 구분
var sectionActve = function(){
	var el_section = $('.box');
	var currentScene = 0;
	var prevScrollHeight = 0;
	var yOffset = 0;
	var foo = [0,1, {start:1 ,end:2 } ]

	setLayout();

	$(document).on("scroll", function(){
		scrollLoop();
		partScroll();
	});

	function scrollLoop(){
		yOffset = $(window).scrollTop();

		prevScrollHeight = 0;
		for(i=0; i < currentScene; i++){
			prevScrollHeight += el_section[i].outerHeight(true)
		}

		if(yOffset > prevScrollHeight + el_section.eq(currentScene).outerHeight(true)){
			currentScene++

			$('body').attr({class:`scene-${currentScene}`})
			
		}

		if(yOffset < prevScrollHeight){
			if(currentScene === 0) return;
			currentScene--

			$('body').attr({class:`scene-${currentScene}`})
		}
		//박스 active 
		//$('.box').removeClass('active');
		//$('.box').eq(currentScene).addClass('active');

	}

	function partScroll(){
		var currentYoffset = yOffset - prevScrollHeight;

		var portfolio = $('#portfolio')
		var portfolio_ratio = currentYoffset / portfolio.height() * 100;
		console.log(portfolio_ratio)

		$('.box').removeClass('active');
		$('.box').eq(currentScene).addClass('active');
		switch(currentScene){
			case(0):

				break;
			case(1):

				if(portfolio_ratio > 50 && portfolio_ratio < 70){
					console.log('fooooooooooooo')
				}

				break;

			case(2):

				if(portfolio_ratio > 50 && portfolio_ratio < 70){
					console.log('barrrrrrrrrrr')
				}

				break;
			case(3):
			
				break;
		}

	}

	function setLayout(){
		let yOffset = $(window).scrollTop();
		let totalScrollHeight = 0;
		for(i=0; i < el_section.length; i++){
			totalScrollHeight += el_section.outerHeight(true);
			//console.log(totalScrollHeight , i)
			if(totalScrollHeight > yOffset){
				currentScene = i;
				break;
			}
		}
		$('body').attr({class:`scene-${currentScene}`})
		//$('.box').eq(currentScene).addClass('active')
	}
}

	


	









</script>

 
</html>
