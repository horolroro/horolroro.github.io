<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title> new document </title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<meta name="description" content="대한민국 NO.1 T커머스 K쇼핑, TV홈쇼핑, 모바일K쇼핑 앱, 베스트100, 다양한 카테고리, 프로모션, 할인 정보 등 안내." />
	<meta name="keywords" content="K 쇼핑" />
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
	<meta name="format-detection" content="telephone=no" /> <!-- 병헌 : 사파리에서 전화번호 자동 표기 방지 -->
 </head>

 <body>
  
<style type="text/css">
	.stage{
		display:flex;
		align-items : center;
		justify-content : center;
		width:100vw;
		height: 100vh;
		background: #333;
	}	
	.door{
		position:relative;
		width:100px;
		height:150px;
		
	}
	.door-back{
		overflow: hidden;
		position: absolute;
		left:0;
		top:0;
		width:100%;
		height:100%;
		background: black;
	}
	.ilbuni{
		position: absolute;
		left:0;
		bottom:0;
		width:100px;
		height:100px;
		background-color : yellow;
		background-repeat : no-repeat;
		background-position: 50% 100%;
		background-size: contain;
		transform : translate3d(100%,0, 0);
		transition: 0.5s 0.5s
	}
	.door-body{
		position:absolute;
		left:0;
		top:0;
		width:100%;
		height:100%;
		transition: 0.5s;
		transform-origin : 0%;
		cursor : pointer;

	}
	.door:nth-child(1) .door-body{background : rgba(255,0,0,0.7)}
	.door:nth-child(2) .door-body{background : rgba(0,255,0,0.7)}
	.door:nth-child(3) .door-body{background : rgba(0,0,255,0.7)}

	.door.door-opened .door-body{
		transform : perspective(800px) rotateY(-110deg);
	}
	.door.door-opened .ilbuni{
		transform : translate3d(0,0,0)
	}
</style>

<div class="stage">
	<div class="door">
		<div class="door-back">
			<div class="ilbuni">111</div>
		</div>
		<div class="door-body"></div>
	</div>
	<div class="door">
		<div class="door-back">
			<div class="ilbuni">222</div>
		</div>
		<div class="door-body"></div>
	</div>
	<div class="door">
		<div class="door-back">
			<div class="ilbuni">3333</div>
		</div>
		<div class="door-body"></div>
	</div>

</div>

  <script>
	//여럿 중에 하나만 활성화하기

	//즉시실행,전역변수회피
	// (function(){
	// 	const stageElem = document.querySelector('.stage')
	// 	var currentItem;

	// 	function doorHandler(e){
	// 		var targetElem = e.target;

	// 		if(currentItem){
	// 			currentItem.classList.remove('door-opened');
	// 		}

	// 		if(targetElem.classList.contains('door-body')){
	// 			targetElem.parentNode.classList.add('door-opened');
	// 			currentItem = targetElem.parentNode;
	// 		}
	// 	}

	// 	stageElem.addEventListener('click' , doorHandler);
	// })();



	//생성자 함수 (constructor)
	function Person(nickname , age){
		this.nickname = nickname;
		this.age = age

	}

	Person.prototype.introduce = function(){
		console.log('이름은 '+ this.nickname + ' 나이는'+ this.age + '살')
	}

	//instance
	const person1 = new Person('일분이',10);
	const person2 = new Person('이분이',8);

	person1.introduce();
	person2.introduce();
  </script>
  
  <script>
	//개선코드_리팩토링
	(function(){
		const stageElem = document.querySelector('.stage')
		var currentItem;

		//활성화
		function activate(elem){
			elem.classList.add('door-opened');
			currentItem = elem;
		}

		//비활성화
		function inactivate(elem){
			elem.classList.remove('door-opened');
		}

		function doorHandler(e){
			var targetElem = e.target;

			if(currentItem){
				inactivate(currentItem);
			}

			if(targetElem.classList.contains('door-body')){
				activate(targetElem.parentNode);
			}
		}

		stageElem.addEventListener('click' , doorHandler);
	})();
  </script>
 



 </body>
</html>
